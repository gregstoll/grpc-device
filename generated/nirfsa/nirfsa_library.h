//---------------------------------------------------------------------
// This file is automatically generated. All manual edits will be lost.
//---------------------------------------------------------------------
// Real implementation of LibraryInterface for NI-RFSA
//---------------------------------------------------------------------
#ifndef NIRFSA_GRPC_LIBRARY_H
#define NIRFSA_GRPC_LIBRARY_H

#include "nirfsa_library_interface.h"

#include <server/shared_library.h>

namespace nirfsa_grpc {

class NiRFSALibrary : public nirfsa_grpc::NiRFSALibraryInterface {
 public:
  NiRFSALibrary();
  virtual ~NiRFSALibrary();

  ::grpc::Status check_function_exists(std::string functionName);
  ViStatus Init(ViRsrc resourceName, ViBoolean idQuery, ViBoolean reset, ViSession* vi);
  ViStatus Close(ViSession vi);
  ViStatus InitWithOptions(ViRsrc resourceName, ViBoolean idQuery, ViBoolean resetDevice, ViConstString optionString, ViSession* vi);

 private:
  using InitPtr = decltype(&niRFSA_init);
  using ClosePtr = decltype(&niRFSA_close);
  using InitWithOptionsPtr = decltype(&niRFSA_InitWithOptions);

  typedef struct FunctionPointers {
    InitPtr Init;
    ClosePtr Close;
    InitWithOptionsPtr InitWithOptions;
  } FunctionLoadStatus;

  nidevice_grpc::SharedLibrary shared_library_;
  FunctionPointers function_pointers_;
};

}  // namespace nirfsa_grpc

#endif  // NIRFSA_GRPC_LIBRARY_H
